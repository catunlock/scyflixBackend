<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>SCYFLIX</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- Custom fonts for this template -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Cabin:700' rel='stylesheet' type='text/css'>

    <!-- Custom styles for this template -->
    <link href="css/grayscale.min.css" rel="stylesheet">
    <link href="css/manolito.css" rel="stylesheet">
    <script>
    	function showTopic(s)
		{
		   var topics = '#topics'+s;
		   $(topics).show();
		}

		function hideTopic(s)
		{
		   var topics = '#topics'+s;
		   $(topics).hide();
		}

		var dict = new Object();
	    var x = document.cookie; 
	    var userName = x.substring(9, x.length);
	    var url = 'http://localhost:3000/getFirstRecomendation?user='+userName;
	    jQuery.support.cors = true;
	    $.ajax ({
	        url: url,
	        datatype: "json",
	        crossDomain: true,
	        success: function (data) {

	          var image1 = data[0].paper.image;
	          var image2 = data[1].paper.image;
	          var image3 = data[2].paper.image;

	          var pdf1 = data[0].paper.pdf;
	          dict[pdf1] = data[0].paper.id;
	          dict[0] = pdf1;
	          var pdf2 = data[1].paper.pdf;
	          dict[pdf2] = data[1].paper.id;
	          dict[1] = pdf2;
	          var pdf3 = data[2].paper.pdf;
	          dict[pdf3] = data[2].paper.id;
	          dict[2] = pdf3;

	          /*var html ='<div class="carousel-inner"><div class="item active"><a href="'+pdf1+'"><img src="'+image1+'" style="width: 100%"></a></div><div class="item"><a href="'+pdf2+'"><img src="'+image2+'" style="width: 100%"></a></div><div class="item"><a href="'+pdf3+'"><img src="'+image3+'" style="width: 100%"></a></div></div>';*/
	          var html ='<div class="carousel-inner"><div class="item active"><img onclick="clickImage(0);" src="'+image1+'" style="width: 100%"></div><div class="item"><img onclick="clickImage(1);" src="'+image2+'" style="width: 100%"></div><div class="item"><img onclick="clickImage(2);" src="'+image3+'" style="width: 100%"></div></div>';
	          
	          document.getElementById("carrousel").innerHTML = html;
	        }
	    })

	    function clickImage(a) {
	      var paperId = dict[dict[a]];
	      var x = document.cookie; 
	      var userName = x.substring(9, x.length);
	      var url = 'http://localhost:3000/updateLastPaper?user='+userName+'&paper='+paperId;
	      jQuery.support.cors = true;
	      $.ajax ({
	          url: url,
	          datatype: "json",
	          crossDomain: true,
	          success: function (data) {
	            alert("DB updated");
	          }
	      })
	      var win = window.open(dict[a], '_blank');
	      win.focus();
	    }
    </script>
  </head>

  <body id="page-top" background="background.png">
   <div id="papers" class="content-section text-center" style ="margin-bottom: 1px">
      <div class="container">
        <div class="row">
       		<h4 style = "font-size: 400%;">BIENVENIDO A SCIFLIX</h4>
          <div class="col-lg-8e mx-auto">
            <h2 style = "font-size: 200%;">Recomendados para ti</h2>


            <!-- The slideshow -->
            <div class="col-sm-8e" id ="Cards" style="background-color:#42DCA3; border-radius: 20px; margin: auto; width:60%">
                  <div id="myCarousel" class="carousel slide" data-ride="carousel">
                    <!-- Indicators 
                    <ol class="carousel-indicators">
                      <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                      <li data-target="#myCarousel" data-slide-to="1"></li>
                      <li data-target="#myCarousel" data-slide-to="2"></li>
                    </ol>-->

                    <!-- Wrapper for slides -->

                    <div id = "carrousel">
                    </div>
                    <!-- Left and right controls -->
                    <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                      <span class="glyphicon glyphicon-chevron-left"></span>
                      <span class="sr-only">Previous</span>
                    </a>
                    <a class="right carousel-control" href="#myCarousel" data-slide="next">
                      <span class="glyphicon glyphicon-chevron-right"></span>
                      <span class="sr-only">Next</span>
                    </a>
                  </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="Sector1 " class="content-section" style="margin-top: 1px">
     	<div class="container">
     	<div class="dropdown" style="margin: 10px;font-size: 200%;">FILTRO DE BÚSQUEDA</div>
        <div class="dropdown" style="min-width: 850px;border: 1px; border-color: white; border-style: solid; padding: 10px; width: 100%;">
        	<div style = "width: 33%; float: left;">
	    		<div style="margin: 10px;font-size: 100%;">VER DESDE</div>
	    		<input type="date" name="fecha" class="btn-default" >
	    		<div style="margin: 10px;font-size: 100%;">HASTA</div>
	    		<input type="date" name="fecha" class="btn-default">
    		</div>
    		<div style = "width: 33%;float: left;">
	    		<div style="margin: 10px;font-size: 100%;">AUTOR</div>
	    		<input type="text" name="autor" class="btn-default" >
	    		<div style="margin: 10px;font-size: 100%;">TEXTO</div>
	    		<input type="text" name="texto" class="btn-default">
    		</div>
    		<div style = "width: 33%;float: right;">
	    		<div style="margin: 10px;font-size: 100%;">CATEGORÍA</div>
	    		<label class="btn-default" style = "width: 100%; border-style: none"><input type="checkbox" name="cb1"> MACHINE LEARNING</label>
	    		<label class="btn-default" style = "width: 100%;border-style: none"><input type="checkbox" name="cb2"> ARTIFICIAL INTELIGENCE</label>
	    		<label class="btn-default" style = "width: 100%;border-style: none"><input type="checkbox" name="cb3"> CRYPTOGRAPHY</label>
    		</div>
    		<div style = "width: 100%; float:right;">
    			<label>Buscar similares a un artículo:<input id="the-file-input" type="file"></label>
    		</div>    		
    		<div style = "width: 100%; float:right;">
    		<button id="btnSubmit" class="btn-default" onclick="login()" style="margin:50px;float:right;">Filtrar</button>
    		</div>
    	</div>
        <div class="row">
          <!-- Left Col -->
          	<div class="col-sm-4">
	            <div class="dropdown">
	            	<br>
	            	<div style="margin: 10px;font-size: 200%;">CATEGORÍAS</div><br>
	            	<div onmouseover="showTopic('ML');" onmouseout="hideTopic('ML');" >
			            <div id = "category" class="btn-default" tag = "ML" style = "padding: 10px;text-align: center;">
			            	MACHINE LEARNING
			            </div>
						<div id = "topicsML" class="btn-inner ">
							<a href="#">Topic 1</a><br>
							<a href="#">Topic 2</a><br>
							<a href="#">Topic 3</a><br>
						</div>
						<script>$('#topicsML').hide();</script>
					</div>
					<div onmouseover="showTopic('AI');" onmouseout="hideTopic('AI');" >
						<div id = "category" class="btn-default" tag = "AI" style = "padding: 10px;text-align: center;">
							ARTIFICIAL INTELIGENCE
						</div>
						<div id = "topicsAI" class="btn-inner">
							<a href="#">Topic 1</a><br>
							<a href="#">Topic 2</a><br>
							<a href="#">Topic 3</a><br>
						</div>
						<script>$('#topicsAI').hide();</script>
					</div>
	            </div>
            </div>

            
      </div>
    </div>
    </div>

  

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Google Maps API Key - Use your own API key to enable the map feature. More information on the Google Maps API can be found at https://developers.google.com/maps/ -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCRngKslUGJTlibkQ3FkfTxj3Xss1UlZDA&sensor=false"></script>

    <!-- Custom scripts for this template -->
    <script src="js/grayscale.min.js"></script>

  </body>

</html>
